<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<!-- 所需要引用的全部css样式 -->
		<!-- mui的css样式 -->
		<link href="./resource/mui/css/mui.css" rel="stylesheet" />
		<!-- mui框架的时间控件 -->
		<link href="./resource/mui/css/mui.picker.min.css" rel="stylesheet" /> 
		<link href="resource/css/bootstrap.css" rel="stylesheet"/>
		<!-- app自定义的css -->
		<link rel="stylesheet" type="text/css" href="resource/css/fangh/app.css" />
		<link rel="stylesheet" type="text/css" href="resource/css/menudown.css" />
		<!-- 全部引入的js文件 -->
		<script src="resource/jquery-3.2.1.js"></script>  
		<script src="resource/js/bootstrap.js"></script>
		<script src="resource/mui/js/mui.min.js"></script>
		<script src="resource/mui/js/mui.picker.min.js"></script>
		<script src="resource/js/menudown.js"></script>
		<script src="resource/js/common.js"></script>
		<script src="resource/js/iconfont.js"></script>
		
		<style>
			*{
				margin:0;
				padding:0;
			}
			
			#time{
				background-color:  #FFFFFF;
			}
			
			.history1{
				width: 95%;
				height: 150px;
				background-color: #FFFFFF;
				margin-top: 10px;
		
			}
			 .history1 .boximg{
				 float: left;
				width: 100px;
				height: 130px;
				margin-top: 10px;
				margin-left: 10px;
				display:inline-block;
				margin-top: 10px;
			}
			#head_pictrue1{
				width: 100%;
				height: 100%;
			}
			.title{
				float: left;
				margin-top: 20px;
				margin-left: 20px;
				font-size: 15px;
			}
			.positionFont{
				float: left;
				margin-top: 5px;
				margin-left: 20px;
				font-size: 15px;
			}
			.billTime{
				float: left;
				margin-top: 5px;
				margin-left: 20px;
				font-size: 15px;
			}
			.billCode{
				float: left;
				margin-top: 5px;
				margin-left: 20px;
				font-size: 15px;
			}
			.price{
				float: right;
				margin-top:10px;
				margin-right: 20px;
				font-size: 18px;
				color: #FC605A;
			}
			.price span{
				color: #000000;
			}
			.btn-danger{
				float: left;
				margin-top:5px;
				margin-left: 20px;
			}
		</style>
	</head>



	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<!-- <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a> -->
			<h1 class="mui-title">历史订单</h1>
		</header>

		<!-- 对下单时间进行日期筛选选择 -->
		<div class="mui-content" >
			<!-- <div class="mui-input-row" id="time">
				<label>下单时间：</label>
				<input type="text"  id="dateSelect" class="mui-input-clear" readonly="readonly">
			</div> -->
			<div id="time">
					<dl class="topmenu">
					<dt>
						<div class="selectlist">
							<div class="select_textdiv">
								<input type="hidden" value=""/>
								<p class="s_text">时间</p><span class="down"><img src="resource/images/down.png"></span>
							</div>
							<div class="select_textul">
								<ul class="select_first_ul">
									<li class="focus">
										<p>全部</p>
										<!-- <ul class="select_second_ul" style="display: block;">
											<li>附近(智能范围)</li>
											<li>500</li>
											<li>1000</li>
											<li>1500</li>
											<li>2000</li>
										</ul> -->
									</li>
									<li>
										<p>一周</p>
										<!-- <ul class="select_second_ul">
											<li>全部商城</li>
											<li>市中心区</li>
											<li>华侨城</li>
											<li>海岸城</li>
											<li>蛇口</li>
										</ul> -->
									</li>
									<li>
										<p>一月</p>
									</li>
									<li>
										<p>一年</p>
									</li>
									<li>
										<p>一年以前</p>
									</li>
								</ul>
							</div>
						</div>	
					</dt>
					<dt>
						<div class="selectlist">
							<div class="select_textdiv">
								<input type="hidden" value=""/>
								<p class="s_text">类型</p><span class="down"><img src="resource/images/down.png"></span>
							</div>
							<div class="select_textul">
								<ul class="select_first_ul">
									<li class="focus">
										<p>全部</p>
									</li>
									<li>
										<p>待支付</p>
									</li>
									<li>
										<p>已支付</p>
									</li>
									<li>
										<p>失效</p>
									</li>
								</ul>
							</div>
						</div>	
					</dt>
				</dl>
			</div>
			<div class="mui-input-row"></div>
			<div id="lishiorder">
			<!-- <div class="history1";">
				<div class="boximg">
					<img id="head_pictrue1" src="https://lzj-picservice.oss-cn-beijing.aliyuncs.com/CloudManor_Pic/resource/pictrue/zbw_2_2.jpg"/>
				</div>
					<span class="title">一棵苹果树,现在只需 998</span>
					<span class="positionFont">位置:南京</span>
				
					<span class="billTime">下单时间:2020-07-14</span>
					<span class="billCode">订单编号:123456789</span>
					<span type="button" class="btn btn-danger">立即支付</span>
					<span class="price"><span>实付款:</span>￥ 998</span>
			</div> -->
			
			<!-- <div class="history1";">
				<div class="boximg">
					<img id="head_pictrue1" src="https://lzj-picservice.oss-cn-beijing.aliyuncs.com/CloudManor_Pic/resource/pictrue/liulx_2_2.jpg"/>
				</div>
					<span class="title">纯正葡萄,现在只需 128</span>
					<span class="positionFont">位置:乌鲁木齐</span>
					<span class="billTime">下单时间:2020-07-14</span>
					<span class="billCode">订单编号:6666666</span>
					<span class="price"><span>实付款:</span>￥ 128</span>
			</div> -->
			
			<!-- <div class="history1";">
				<div class="boximg">
					<img id="head_pictrue1" src="https://lzj-picservice.oss-cn-beijing.aliyuncs.com/CloudManor_Pic/resource/pictrue/liulx_2_7.jpg"/>
				</div>
					<span class="title">纯种奶牛,现在只需 18888</span>
					<span class="positionFont">位置:乌鲁木齐</span>
					<span class="billTime">下单时间:2020-07-14</span>
					<span class="billCode">订单编号:6666666</span>
					<span class="price"><span>实付款:</span>￥ 18888</span>
			</div> -->
			</div>
	</div>
	</body>
	<script>
		$(function(){
			//历史订单
			orderdingdan();
		})
		//历史订单
		function orderdingdan(shijian,leixing){
			if(shijian=="一周"){
				shijian=6;
			}else if(shijian=="一月"){
				shijian=29;
			}else if(shijian=="一年"){
				shijian=364;
			}else if(shijian=="一年以前"){
				shijian=1;
			}
			var storage=window.localStorage;//获取用户信息
			var json=storage.getItem("userInfo");
			var userInfo=JSON.parse(json);//获取用户信息
			$.ajax({
				url:commonJavaUrl+"order/GETOrderHistoricalVO", 
				//url:"http://localhost:8088/order/GETOrderHistoricalVO",
				type:"post",
				dataType:"json",
				data:{
					userId:userInfo.id,
					shijian:shijian,
					leixing:leixing
				},
				success:function(data){
					var mm="";
					if(data!=null && data!=""){
						$(data).each(function(a,b){
							mm+="<div class=\"history1\";\"> \n"+
									"<div onclick=\"ziyuanxianqing("+b.id+")\" class=\"boximg\">\n"+
										"<img id=\"head_pictrue1\" src=\""+b.imgDir+"\"/>\n"+
									"</div>\n"+
										"<span class=\"title\">"+b.title+"</span>\n"+
										//"<span class=\"positionFont\">位置:"+b.geographicPosition+"</span>\n"+
										"<span class=\"billTime\">下单时间:"+b.orderTime+"</span>\n"+
										"<span class=\"billCode\">订单编号:"+b.orderNo+"</span>";
										if(b.digitalCode=="待支付"){
											mm+="<span type=\"button\" onclick=\"zhifu("+b.id+")\" class=\"btn btn-danger\">立即支付</span>";
										}
										mm+="<span class=\"price\"><span>实付款:</span>￥ "+b.money+"</span>\n"+
								"</div>";
						})
						$("#lishiorder").html(mm);
					}else{
						mm+="<svg class=\"icon\" aria-hidden=\"true\" style=\"margin-top: 30%;margin-left: 10%;\">\n"+
							"<use xlink:href=\"#icon-zanwudingdan\"></use>\n"+
						"</svg>";
						$("#lishiorder").html(mm);
					}
				},error:function(){
					alert("异常");
					var mm="<svg class=\"icon\" aria-hidden=\"true\" style=\"margin-top: 30%;margin-left: 10%;\">\n"+
						"<use xlink:href=\"#icon-zanwudingdan\"></use>\n"+
					"</svg>";
					$("#lishiorder").html(mm);
				}
			})
		}
		//跳转立即支付
		function zhifu(id){
			alert(id);
			//window.location.href="./";
		}
		//跳转资源详情
		function ziyuanxianqing(id){
			window.location.href="./Lordzhuangdetails.html?resourceId="+id;
		}
	</script>
</html>
